<h1>Fetch Media From Instagram</h1><label>Hashtag:</label><input type="text" ng-model="hashtag"><br><button class="btn btn-default" ng-click="fetchMedia(false)">Fetch NEW Items Only</button> <button class="btn btn-default" ng-click="fetchMedia(true)">Refetch ALL Items</button><br><br><h1>Media</h1><ul class="nav nav-pills" ng-init="activeFilter = 'new'"><li ng-class="{active: (activeFilter == 'new')}"><a ng-click="activeFilter = 'new'">New Items</a></li><li ng-class="{active: (activeFilter == 'donation')}"><a ng-click="activeFilter = 'donation'">Items Assigned to Donations</a></li><li ng-class="{active: (activeFilter == 'pet')}"><a ng-click="activeFilter = 'pet'">Items assigned as Pets Profile Video</a></li><li ng-class="{active: (activeFilter == 'removed')}"><a ng-click="activeFilter = 'removed'">Removed Items</a></li></ul><br><ul class="media-list"><li class="media" ng-repeat="item in items | orderBy:'created_time':true" ng-if="!shouldFilterItem(item)"><a class="pull-left thumbnail" ng-href="{{item.link}}" target="_blank"><img ng-if="item.type=='im'" class="media-object" ng-src="{{item.image}}" width="256"><video ng-if="item.type=='vd'" class="media-object" width="256" controls=""><source ng-src="{{trustUrl(item.video)}}" type="video/mp4"></video></a><div class="media-body"><div class="panel panel-default"><div class="panel-heading"><div class="media-wrapper btn-group" style="float: right; margin: -5px"><button class="btn btn-default" ng-click="updateItem(item)">SAVE</button> <button class="btn btn-default" ng-if="!item.removed" ng-click="removeItem(item)">REMOVE</button> <button class="btn btn-default" ng-if="item.removed" ng-click="unremoveItem(item)">UNREMOVE</button> <button class="btn btn-default" ng-if="!item.removed" ng-click="deleteItem(item)">DELETE</button></div><h4 class="media-heading">{{item.caption}}</h4></div><div class="panel-body"><ul class="nav nav-pills" ng-init="item.activePill = ''"><li ng-class="{active: (item.activePill == '')}"><a ng-click="item.activePill = ''">None</a></li><li ng-class="{active: (item.activePill == 'rawEdit')}"><a ng-click="item.activePill = 'rawEdit'">Raw Data</a></li><li ng-hide="item.donation" ng-class="{active: (item.activePill == 'pet')}"><a ng-click="item.activePill = 'pet'">Create Pet</a></li><li ng-hide="item.pet" ng-class="{active: (item.activePill == 'donation')}"><a ng-click="item.activePill = 'donation'">Assign to Donation</a></li></ul><div style="padding:10px"><table ng-if="item.activePill == 'raw'" class="table"><tr ng-repeat="(key, val) in item"><td>{{key}}<td>{{item[key]}}</table><div ng-if="item.activePill == 'rawEdit'" class="stam media-wrapper input-group input-group-sm" ng-repeat="(key, val) in item"><span class="input-group-addon">{{key}}</span><input type="text" class="form-control" ng-model="item[key]" value="{{val}}"></div><div ng-if="item.activePill == 'donation'"><div class="media-wrapper input-group"><span class="input-group-addon">Donation</span><select class="form-control" ng-model="item['donation']"><option ng-repeat="donation in donations" ng-if="donation.pet && donation.user && donation.treat && !donation.media" value="{{donation._id}}">{{($index+1) + '. ' + formatDonationName(donation)}}</select></div><div><button class="btn btn-default" type="button" ng-click="assignToDonation(item)">Assign to Donation</button></div></div><div ng-if="item.activePill == 'pet'"><div class="media-wrapper input-group"><span class="input-group-addon">Name</span><input type="text" class="form-control" ng-model="item.pet.name"></div><div class="media-wrapper input-group"><span class="input-group-addon">Age</span><input type="text" class="form-control" ng-model="item.pet.age"></div><div class="media-wrapper input-group"><span class="input-group-addon">Gender</span><input type="text" class="form-control" ng-model="item.pet.gender"></div><div class="media-wrapper input-group"><span class="input-group-addon">Kennel</span><select class="form-control" ng-model="item.pet['kennel']"><option ng-repeat="kennel in kennels" value="{{kennel._id}}">{{kennel.name}}</select></div><div><button class="btn btn-default" type="button" ng-click="createPet(item)">Create Pet</button></div></div></div></div></div></div><hr style="clear: both"></li></ul><!--<div class="media-container">
    <div class="media-wrapper" ng-repeat="item in items">
        <img ng-src="{{item.image}}"/>
        <div class="media-fields">
            <div class="media-wrapper input-group" ng-repeat="(key, val) in item">
                <span class="input-group-addon">{{key}}</span>
                <input type="text" class="form-control" ng-model="item[key]" value="{{val}}"/>
            </div>
        </div>
        <button class="btn btn-default" ng-click="updateItem($index)">SAVE</button>
        <button class="btn btn-default" ng-click="removeItem($index)">REMOVE</button>
    </div>
</div>--><!--
<json-explorer json-data="{{db}}"></json-explorer>-->